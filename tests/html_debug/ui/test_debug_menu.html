<!DOCTYPE html>
<html>
<head>
    <title>Test Debug Menu Navigation</title>
    <script src="../../static/shared-header.js"></script>
    <script src="../../static/global-config.js"></script>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.6; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 8px; }
        .success { background: #d4f6d4; }
        .info { background: #d1ecf1; }
        .warning { background: #fef3cd; }
        code { background: #f8f9fa; padding: 2px 6px; border-radius: 4px; }
        .demo-buttons { display: flex; gap: 10px; margin: 10px 0; flex-wrap: wrap; }
        .demo-btn { 
            padding: 8px 16px; 
            border: 1px solid #007bff; 
            background: #fff; 
            color: #007bff; 
            border-radius: 6px; 
            cursor: pointer; 
            transition: all 0.2s;
        }
        .demo-btn:hover { background: #007bff; color: white; }
    </style>
</head>
<body>
    <div id="shared-header"></div>

    <h1>ğŸ› ï¸ Test Debug Menu Navigation</h1>

    <div class="test-section info">
        <h3>ğŸ“‹ FonctionnalitÃ©s du Menu Debug</h3>
        <p>Le menu debug permet d'accÃ©der rapidement aux tests HTML les plus importants organisÃ©s par catÃ©gorie :</p>
        <ul>
            <li><strong>ğŸ”§ Core System</strong> : Tests des fonctionnalitÃ©s principales</li>
            <li><strong>ğŸ“Š Scoring & CCS</strong> : Tests des systÃ¨mes de scoring</li> 
            <li><strong>ğŸ¨ UI & Navigation</strong> : Tests d'interface utilisateur</li>
            <li><strong>ğŸŒ Data & API</strong> : Tests de donnÃ©es et API</li>
        </ul>
    </div>

    <div class="test-section warning">
        <h3>ğŸ”“ Activation du Mode Debug</h3>
        <p>Plusieurs mÃ©thodes pour activer le mode debug :</p>
        
        <div class="demo-buttons">
            <button class="demo-btn" onclick="activateDebugURL()">
                ğŸ”— URL Parameter
            </button>
            <button class="demo-btn" onclick="toggleDebugConfig()">
                âš™ï¸ Toggle Config
            </button>
            <button class="demo-btn" onclick="showDoubleClickHint()">
                ğŸ–±ï¸ Double-Click Hint
            </button>
        </div>

        <div id="activation-info" style="margin-top: 10px; padding: 10px; background: #f8f9fa; border-radius: 6px; display: none;"></div>
    </div>

    <div class="test-section success" id="debug-status">
        <h3>ğŸ” Ã‰tat Actuel du Debug</h3>
        <p>Mode debug : <span id="debug-mode-status">Chargement...</span></p>
        <p>Menu visible : <span id="debug-menu-visible">VÃ©rification...</span></p>
    </div>

    <div class="test-section">
        <h3>ğŸ“š Instructions d'Utilisation</h3>
        <ol>
            <li><strong>Activation par URL</strong> : Ajouter <code>?debug=true</code> Ã  l'URL</li>
            <li><strong>Activation Persistante</strong> : Double-cliquer sur le bouton "Settings" dans la navigation</li>
            <li><strong>AccÃ¨s au Menu</strong> : Cliquer sur "ğŸ› ï¸ Debug Tests" pour ouvrir le dropdown</li>
            <li><strong>Navigation</strong> : Les liens ouvrent directement les tests dans le mÃªme onglet</li>
            <li><strong>DÃ©sactivation</strong> : Re-double-cliquer sur "Settings" ou enlever le paramÃ¨tre URL</li>
        </ol>
    </div>

    <script>
        // Initialize shared header
        window.addEventListener('DOMContentLoaded', function() {
            initSharedHeader('test-debug-menu', { showConfigIndicators: false });
            updateDebugStatus();
        });

        // Activation par URL parameter
        function activateDebugURL() {
            const newURL = window.location.origin + window.location.pathname + '?debug=true';
            document.getElementById('activation-info').innerHTML = `
                <strong>ğŸ”— MÃ©thode URL Parameter</strong><br>
                Ajoutez <code>?debug=true</code> Ã  n'importe quelle URL pour activer temporairement le mode debug.<br>
                <a href="${newURL}" style="color: #007bff;">Exemple : ${newURL}</a>
            `;
            document.getElementById('activation-info').style.display = 'block';
        }

        // Toggle debug via config
        function toggleDebugConfig() {
            if (window.globalConfig) {
                const newMode = window.globalConfig.toggleDebugMode();
                document.getElementById('activation-info').innerHTML = `
                    <strong>âš™ï¸ Configuration ToggleÃ©e</strong><br>
                    Mode debug maintenant : <strong>${newMode ? 'ACTIVÃ‰' : 'DÃ‰SACTIVÃ‰'}</strong><br>
                    Cette configuration est persistante dans localStorage.
                `;
                document.getElementById('activation-info').style.display = 'block';
                setTimeout(updateDebugStatus, 500);
            }
        }

        // Hint pour double-click
        function showDoubleClickHint() {
            document.getElementById('activation-info').innerHTML = `
                <strong>ğŸ–±ï¸ Double-Click sur Settings</strong><br>
                Double-cliquez rapidement sur le bouton "âš™ï¸ Settings" dans la navigation pour toggle le mode debug.<br>
                Une notification apparaÃ®tra pour confirmer l'activation/dÃ©sactivation.
            `;
            document.getElementById('activation-info').style.display = 'block';
        }

        // Met Ã  jour l'affichage du statut debug
        function updateDebugStatus() {
            setTimeout(() => {
                const isDebug = window.globalConfig ? window.globalConfig.isDebugMode() : false;
                const menuVisible = document.querySelector('.debug-section') !== null;
                
                document.getElementById('debug-mode-status').innerHTML = 
                    `<strong style="color: ${isDebug ? 'green' : 'red'};">${isDebug ? 'âœ… ACTIVÃ‰' : 'âŒ DÃ‰SACTIVÃ‰'}</strong>`;
                    
                document.getElementById('debug-menu-visible').innerHTML = 
                    `<strong style="color: ${menuVisible ? 'green' : 'red'};">${menuVisible ? 'ğŸ‘ï¸ VISIBLE' : 'ğŸš« MASQUÃ‰'}</strong>`;
            }, 200);
        }

        // Ã‰couter les changements de debug mode
        window.addEventListener('debugModeChanged', updateDebugStatus);
    </script>
</body>
</html>