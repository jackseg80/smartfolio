# ============================================================================
# SmartFolio Production Environment Configuration
# ============================================================================
#
# IMPORTANT: Copy this file to .env on your production server
#
#   1. On production server: cp .env.production.example .env
#   2. Edit .env and fill in your credentials
#   3. Run: ./deploy.sh
#
# SECURITY: Never commit .env with real credentials to git!
#

# Environment
DEBUG=false
ENVIRONMENT=production

# API Base URL (for internal HTTP calls)
# Set to your server IP or domain
API_BASE_URL=http://192.168.1.200:8080

# Redis (managed by Docker Compose)
REDIS_URL=redis://redis:6379/0

# Server Port
PORT=8080

# Scheduler (enable for production)
RUN_SCHEDULER=1

# Rate limiting (token bucket system)
RATE_LIMIT_ENABLED=true
# Token bucket configuration (recommended for production)
# Dashboard fait 20-30 requêtes parallèles au chargement → besoin burst élevé
SECURITY_RATE_LIMIT_REFILL_RATE=20.0  # Tokens per second (20 req/s = 1200/min)
SECURITY_RATE_LIMIT_BURST_SIZE=50     # Burst capacity (allow 50 simultaneous requests)

# Logging
LOG_LEVEL=INFO

# Allowed Hosts (comma-separated list of allowed Host headers)
# Use "*" to allow all hosts (permissive for LAN/Docker)
# Or specify: localhost,127.0.0.1,192.168.1.200,yourdomain.com
ALLOWED_HOSTS=localhost,127.0.0.1,192.168.1.200

# HTTPS Redirect (set to true only if you have SSL certificate)
# For LAN servers without SSL: keep false to avoid ERR_SSL_PROTOCOL_ERROR
# For public servers with SSL: set to true
SECURITY_FORCE_HTTPS=false

# ============================================================================
# SaxoBank OAuth2 Credentials
# ============================================================================
#
# Get your credentials from: https://www.developer.saxo/openapi/appmanagement
#

# Simulation Environment (for testing)
SAXO_SIM_CLIENT_ID=your_sim_client_id_here
SAXO_SIM_CLIENT_SECRET=your_sim_client_secret_here

# Live Environment (PRODUCTION - real money!)
SAXO_LIVE_CLIENT_ID=your_live_client_id_here
SAXO_LIVE_CLIENT_SECRET=your_live_client_secret_here

# Active Environment (sim or live)
# IMPORTANT: Use "sim" for testing, "live" only when ready for real trading
SAXO_ENVIRONMENT=sim

# OAuth2 Redirect URIs (must match Saxo Developer Portal configuration)
# Add your production server IP/domain
SAXO_REDIRECT_URI=http://192.168.1.200:8080/api/saxo/callback

# ============================================================================
# Optional: Security & Admin
# ============================================================================

# Admin API key (optional, for admin endpoints)
# ADMIN_KEY=your_secure_random_key_here

# Debug token (optional, for debugging)
# DEBUG_TOKEN=your_debug_token_here

# ============================================================================
# Optional: Feature Flags
# ============================================================================

# Risk Score V2 (enhanced degen portfolio detection)
RISK_SCORE_V2_ENABLED=true

# Crypto-Toolbox mode (1=FastAPI native with Playwright)
CRYPTO_TOOLBOX_NEW=1

# ============================================================================
# Optional: Data Sources
# ============================================================================

# Allow stub/test data sources (disable in production)
ALLOW_STUB_SOURCES=false
COMPUTE_ON_STUB_SOURCES=false

# ============================================================================
# Optional: CORS (only needed if frontend on different domain)
# ============================================================================

# Allowed CORS origins (comma-separated)
# CORS_ORIGINS=https://yourdomain.com,https://www.yourdomain.com
