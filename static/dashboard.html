<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>üìä Dashboard - Crypto Rebalancer</title>
    <link rel="stylesheet" href="shared-theme.css">
    <link rel="stylesheet" href="theme-compat.css">

    <script src="global-config.js"></script>
    <script src="shared-header.js"></script>
    <script src="appearance.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            background: var(--theme-background);
            color: var(--theme-text);
            font-family: system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif;
            line-height: 1.6;
            min-height: 100vh;
        }

        .wrap {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .dashboard-grid {
            display: grid;
            gap: 20px;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            margin-top: 20px;
        }

        .card {
            background: var(--theme-surface);
            border: 1px solid var(--theme-border);
            border-radius: var(--radius-lg);
            padding: var(--space-xl);
            transition: all var(--transition-normal);
            box-shadow: var(--shadow-sm);
        }

        .card:hover {
            border-color: var(--brand-primary);
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-lg);
            padding-bottom: var(--space-md);
            border-bottom: 1px solid var(--theme-border);
        }

        .card-title {
            font-size: 18px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .card-icon {
            font-size: 24px;
        }

        .metric {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 12px 0;
            padding: 8px 0;
        }

        .metric-label {
            color: var(--theme-text-muted);
            font-size: 14px;
        }

        .metric-value {
            font-weight: 600;
            font-size: 16px;
            color: var(--theme-text);
        }

        .status-badge {
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-active {
            background: var(--success-bg);
            color: var(--success);
            border: 1px solid var(--success);
        }

        .status-warning {
            background: var(--warning-bg);
            color: var(--warning);
            border: 1px solid var(--warning);
        }

        .status-error {
            background: var(--danger-bg);
            color: var(--danger);
            border: 1px solid var(--danger);
        }

        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
            margin-top: 16px;
        }

        .action-btn {
            background: var(--brand-primary);
            color: white;
            text-decoration: none;
            padding: var(--space-md) var(--space-lg);
            border-radius: var(--radius-md);
            font-weight: 600;
            text-align: center;
            transition: all var(--transition-normal);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-sm);
        }

        .action-btn:hover {
            transform: translateY(-1px);
            box-shadow: var(--shadow-lg);
            background: var(--brand-primary-hover);
        }

        .action-btn.secondary {
            background: var(--theme-surface-elevated);
            color: var(--theme-text);
            border: 1px solid var(--theme-border);
        }

        .action-btn.secondary:hover {
            border-color: var(--brand-primary);
            color: var(--brand-primary);
            background: var(--theme-surface-hover);
        }

        /* Container pour graphique Chart.js */
        .portfolio-chart {
            height: 250px;
            position: relative;
            margin: var(--space-lg) 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .portfolio-chart canvas {
            max-height: 100%;
            max-width: 100%;
        }

        .recent-activity {
            max-height: 300px;
            overflow-y: auto;
        }

        .activity-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--space-sm) 0;
            border-bottom: 1px solid var(--theme-border);
        }

        .activity-item:last-child {
            border-bottom: none;
        }

        .activity-desc {
            color: var(--theme-text-muted);
            font-size: 13px;
        }

        .activity-time {
            color: var(--theme-text-muted);
            font-size: 12px;
        }

        .connections-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 12px;
            margin-top: 12px;
        }

        .connection-item {
            text-align: center;
            padding: var(--space-md);
            border-radius: var(--radius-md);
            border: 1px solid var(--theme-border);
            background: var(--theme-surface-elevated);
        }

        .connection-name {
            font-size: 12px;
            margin-bottom: 4px;
            color: var(--theme-text-muted);
        }

        .loading {
            color: var(--theme-text-muted);
            text-align: center;
            padding: var(--space-xl);
        }

        .error {
            color: var(--danger);
            text-align: center;
            padding: var(--space-xl);
            background: var(--danger-bg);
            border: 1px solid var(--danger);
            border-radius: var(--radius-md);
            margin: var(--space-md) 0;
        }

        @media (max-width: 768px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }

            .quick-actions {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>
    <!-- Header inject√© par shared-header.js -->
    <div class="wrap">
        <div class="dashboard-grid">

            <!-- Portfolio Overview -->
            <div class="card">
                <div class="card-header">
                    <div class="card-title"><span class="card-icon">üí∞</span>Portfolio Overview</div>
                    <div style="display:flex;gap:8px;align-items:center;">
                        <button class="action-btn secondary" style="padding:4px 8px;font-size:12px;"
                            onclick="forceRefreshData()">üîÑ</button>
                        <span class="status-badge status-active" id="portfolio-status">Loading</span>
                    </div>
                </div>

                <div class="metric">
                    <span class="metric-label">Total Value</span>
                    <span class="metric-value" id="total-value">--</span>
                </div>

                <div class="metric">
                    <span class="metric-label">P&L Today</span>
                    <span class="metric-value" id="daily-pnl">--</span>
                </div>

                <div class="metric">
                    <span class="metric-label">Assets Count</span>
                    <span class="metric-value" id="assets-count">--</span>
                </div>

                <div class="portfolio-chart" id="portfolio-chart">
                    <canvas id="portfolioChartCanvas"></canvas>
                </div>
            </div>


            <!-- Execution Status -->
            <div class="card">
                <div class="card-header">
                    <div class="card-title"><span class="card-icon">üéØ</span>Execution Status</div>
                    <span class="status-badge" id="execution-status">Loading</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Last Execution</span>
                    <span class="metric-value" id="last-execution">--</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Success Rate (24h)</span>
                    <span class="metric-value" id="success-rate">--</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Total Volume (24h)</span>
                    <span class="metric-value" id="volume-24h">--</span>
                </div>
            </div>

            <!-- Exchange Connections -->
            <div class="card">
                <div class="card-header">
                    <div class="card-title"><span class="card-icon">üîó</span>Exchange Status</div>
                    <a href="monitoring_advanced.html" class="status-badge status-active"
                        style="text-decoration:none;">View Details</a>
                </div>
                <div class="connections-grid" id="connections-grid">
                    <div class="loading">Loading connections...</div>
                </div>
            </div>

            <!-- Recent Activity -->
            <div class="card">
                <div class="card-header">
                    <div class="card-title"><span class="card-icon">üìã</span>Recent Activity</div>
                    <a href="execution_history.html" class="status-badge status-active"
                        style="text-decoration:none;">View All</a>
                </div>
                <div class="recent-activity" id="recent-activity">
                    <div class="loading">Loading recent activity...</div>
                </div>
            </div>

            <!-- System Health -->
            <div class="card">
                <div class="card-header">
                    <div class="card-title"><span class="card-icon">‚ù§Ô∏è</span>System Health</div>
                    <span class="status-badge" id="system-health">Loading</span>
                </div>
                <div class="metric">
                    <span class="metric-label">API Status</span>
                    <span class="metric-value" id="api-status">--</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Data Freshness</span>
                    <span class="metric-value" id="data-freshness">--</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Safety Validator</span>
                    <span class="metric-value" id="safety-status">--</span>
                </div>
            </div>

        </div>
    </div>

    <script>
        // √âtat global
        let dashboardData = { portfolio: null, connections: null, recentActivity: null, executionStats: null };
        let portfolioChart = null;

        document.addEventListener('DOMContentLoaded', async () => {
            console.log('üìä Dashboard unifi√© initialis√©');
            initSharedHeader('dashboard', { showConfigIndicators: true });

            // Appliquer le th√®me imm√©diatement
            console.log('Initializing theme for dashboard page...');
            if (window.globalConfig && window.globalConfig.applyTheme) {
                window.globalConfig.applyTheme();
            }
            if (window.applyAppearance) {
                window.applyAppearance();
            }
            console.log('Current theme after dashboard init:', document.documentElement.getAttribute('data-theme'));

            // Configuration Chart.js avec th√®me
            initChartTheme();

            await loadDashboardData();
            setInterval(loadDashboardData, 30000);

            // √âcouter les changements de th√®me pour synchronisation cross-tab
            window.addEventListener('storage', function (e) {
                if (e.key === 'crypto_rebalancer_settings') {
                    console.log('Settings changed in another tab, reapplying theme...');
                    setTimeout(() => {
                        if (window.globalConfig && window.globalConfig.applyTheme) {
                            window.globalConfig.applyTheme();
                        }
                        if (window.applyAppearance) {
                            window.applyAppearance();
                        }
                        // Refaire le th√®me des graphiques aussi
                        initChartTheme();
                    }, 100);
                }
            });

            window.addEventListener('dataSourceChanged', (event) => {
                console.log(`üîÑ Source chang√©e: ${event.detail.oldSource} ‚Üí ${event.detail.newSource}`);
                loadDashboardData();
            });
        });

        async function loadDashboardData() {
            try {
                const [portfolioData, connectionsData, historyData, executionStatus] = await Promise.allSettled([
                    loadPortfolioData(), loadConnectionsStatus(), loadRecentHistory(), loadExecutionStatus()
                ]);
                updatePortfolioDisplay(portfolioData.status === 'fulfilled' ? portfolioData.value : null);
                updateConnectionsDisplay(connectionsData.status === 'fulfilled' ? connectionsData.value : null);
                updateRecentActivity(historyData.status === 'fulfilled' ? historyData.value : null);
                updateExecutionStatus(executionStatus.status === 'fulfilled' ? executionStatus.value : null);
                updateSystemHealth();

                console.log('‚úÖ Dashboard data loaded successfully');
            } catch (e) {
                console.error('Erreur chargement dashboard:', e);
                showError('Erreur lors du chargement des donn√©es');
            }
        }

        async function loadPortfolioData() {
            try {
                const source = (typeof globalConfig !== 'undefined' ? (globalConfig.get('data_source') || 'cointracking') : 'cointracking');
                console.log(`üìä Chargement portfolio avec source: ${source}`);

                // Utiliser l'API r√©elle pour obtenir les donn√©es du portefeuille
                const response = await fetch(`http://localhost:8000/api/risk/dashboard?source=${source}&pricing=local&min_usd=1.00`);
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }

                const data = await response.json();

                if (!data.success) {
                    throw new Error(data.message || 'Failed to load portfolio data');
                }

                // Extraire les donn√©es n√©cessaires pour le dashboard
                const portfolioSummary = data.portfolio_summary;
                // Les balances sont maintenant dans data.balances directement
                const balances = data.balances || [];

                return {
                    ok: true,
                    metrics: {
                        total_value_usd: portfolioSummary.total_value || 0,
                        asset_count: portfolioSummary.num_assets || 0,
                        last_updated: data.timestamp || new Date().toISOString()
                    },
                    performance: {
                        performance_available: true,
                        current_value_usd: portfolioSummary.total_value || 0,
                        absolute_change_usd: 0 // P&L √† impl√©menter si disponible
                    },
                    balances: {
                        items: balances,
                        total_count: balances.length,
                        timestamp: data.timestamp || new Date().toISOString()
                    }
                };
            } catch (e) {
                console.error('Erreur portfolio:', e);
                return null;
            }
        }

        async function loadConnectionsStatus() {
            try {
                return { binance: { name: "Binance", connected: true }, kraken: { name: "Kraken", connected: true }, coinbase: { name: "Coinbase", connected: false } };
            } catch (e) { console.error('Erreur connexions:', e); return null; }
        }

        async function loadRecentHistory() {
            try {
                return {
                    sessions: [
                        { exchange: "Binance", total_orders: 3, successful_orders: 3, total_volume_usd: 1250.50, timestamp: new Date(Date.now() - 3600000).toISOString() },
                        { exchange: "Kraken", total_orders: 2, successful_orders: 2, total_volume_usd: 890.25, timestamp: new Date(Date.now() - 7200000).toISOString() }
                    ]
                };
            } catch (e) { console.error('Erreur historique:', e); return null; }
        }

        async function loadExecutionStatus() {
            try {
                return { recent_24h: { total_orders: 5, success_rate: 96.5, total_volume: 2140.75 } };
            } catch (e) { console.error('Erreur statut ex√©cution:', e); return null; }
        }

        function updatePortfolioDisplay(data) {
            if (!data || !data.ok) {
                document.getElementById('total-value').textContent = 'Erreur';
                document.getElementById('daily-pnl').textContent = 'Erreur';
                const st = document.getElementById('portfolio-status');
                st.className = 'status-badge status-error'; st.textContent = 'Erreur';
                return;
            }
            const { metrics, performance } = data;

            document.getElementById('total-value').textContent = formatUSD(metrics.total_value_usd || 0);

            const dailyPnl = performance?.absolute_change_usd || 0;
            const pnlEl = document.getElementById('daily-pnl');
            pnlEl.textContent = formatUSD(dailyPnl);
            pnlEl.style.color = dailyPnl >= 0 ? 'var(--success)' : 'var(--danger)';

            document.getElementById('assets-count').textContent = metrics.asset_count || 0;

            const statusEl = document.getElementById('portfolio-status');
            if ((metrics.total_value_usd || 0) > 0) { statusEl.className = 'status-badge status-active'; statusEl.textContent = 'Actif'; }
            else { statusEl.className = 'status-badge status-warning'; statusEl.textContent = 'Vide'; }

            updatePortfolioChart(data.balances);
        }
        function updateConnectionsDisplay(data) {
            const container = document.getElementById('connections-grid');
            if (!data) { container.innerHTML = '<div class="error">Erreur de chargement</div>'; return; }

            const html = Object.values(data).map(conn => {
                const cls = conn.connected ? 'status-active' : 'status-error';
                const txt = conn.connected ? 'Online' : 'Offline';
                return `
          <div class="connection-item">
            <div class="connection-name">${conn.name}</div>
            <div class="status-badge ${cls}">${txt}</div>
          </div>`;
            }).join('');
            container.innerHTML = html;
        }

        function updateRecentActivity(data) {
            const container = document.getElementById('recent-activity');
            if (!data || !data.sessions || data.sessions.length === 0) {
                container.innerHTML = `
          <div class="activity-item">
            <div>
              <div>Aucune activit√© r√©cente</div>
              <div class="activity-desc">Les sessions d'ex√©cution appara√Ætront ici</div>
            </div>
            <div class="activity-time">--</div>
          </div>`;
                return;
            }
            const html = data.sessions.slice(0, 5).map(s => `
        <div class="activity-item">
          <div>
            <div>${s.total_orders || 0} ordres sur ${s.exchange || 'Exchange'}</div>
            <div class="activity-desc">${s.successful_orders || 0} r√©ussis, ${formatUSD(s.total_volume_usd || 0)} volume</div>
          </div>
          <div class="activity-time">${formatTimeAgo(s.timestamp)}</div>
        </div>`).join('');
            container.innerHTML = html;
        }

        function updateExecutionStatus(data) {
            if (!data || !data.recent_24h) {
                document.getElementById('last-execution').textContent = 'Aucune';
                document.getElementById('success-rate').textContent = '--';
                document.getElementById('volume-24h').textContent = '$0.00';
                const st = document.getElementById('execution-status'); st.className = 'status-badge status-warning'; st.textContent = 'En attente';
                return;
            }
            document.getElementById('last-execution').textContent = data.recent_24h?.total_orders > 0 ? 'R√©cent' : 'Aucune';
            const sr = data.recent_24h?.success_rate;
            document.getElementById('success-rate').textContent = (sr !== undefined) ? sr.toFixed(1) + '%' : '--';
            document.getElementById('volume-24h').textContent = formatUSD(data.recent_24h?.total_volume || 0);

            const st = document.getElementById('execution-status');
            if (sr >= 95) { st.className = 'status-badge status-active'; st.textContent = 'Excellent'; }
            else if (sr >= 90) { st.className = 'status-badge status-warning'; st.textContent = 'Bon'; }
            else if (sr !== undefined) { st.className = 'status-badge status-error'; st.textContent = '√Ä am√©liorer'; }
            else { st.className = 'status-badge status-warning'; st.textContent = 'En attente'; }
        }

        function updateSystemHealth() {
            document.getElementById('api-status').textContent = 'Online';
            document.getElementById('data-freshness').textContent = 'R√©cente';
            document.getElementById('safety-status').textContent = 'Actif';
            const st = document.getElementById('system-health'); st.className = 'status-badge status-active'; st.textContent = 'Healthy';
        }

        function formatUSD(v) {
            if (!v) return '$0.00';
            return new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD', minimumFractionDigits: 2, maximumFractionDigits: 2 }).format(v);
        }
        function formatTimeAgo(ts) {
            if (!ts) return 'N/A';
            const d = new Date(ts), now = new Date(), dm = Math.floor((now - d) / (1000 * 60));
            if (dm < 60) return `${dm}min`;
            if (dm < 1440) return `${Math.floor(dm / 60)}h`;
            return `${Math.floor(dm / 1440)}j`;
        }
        function showError(m) { console.error(m); }
        async function forceRefreshData() { console.log('üîÑ Force refresh demand√© par utilisateur'); await loadDashboardData(); }

        // Configuration Chart.js avec th√®me adaptatif
        function initChartTheme() {
            if (typeof Chart !== 'undefined') {
                Chart.defaults.color = 'var(--theme-text)';
                Chart.defaults.borderColor = 'var(--theme-border)';
                Chart.defaults.backgroundColor = 'var(--theme-surface)';
                Chart.defaults.plugins.tooltip.backgroundColor = 'var(--theme-surface-elevated)';
                Chart.defaults.plugins.tooltip.titleColor = 'var(--theme-text)';
                Chart.defaults.plugins.tooltip.bodyColor = 'var(--theme-text)';
                Chart.defaults.plugins.tooltip.borderColor = 'var(--theme-border)';
                Chart.defaults.plugins.tooltip.borderWidth = 1;
            }
        }

        // Couleurs pour le graphique portfolio
        const PORTFOLIO_COLORS = [
            '#3b82f6', '#ef4444', '#10b981', '#f59e0b', '#8b5cf6',
            '#06b6d4', '#84cc16', '#f97316', '#ec4899', '#6366f1'
        ];

        // Regroupement par aliases (BTC/TBTC/WBTC, ETH/stETH/wstETH, etc.)
        const ASSET_GROUPS = {
            'BTC': ['BTC', 'TBTC', 'WBTC'],
            'ETH': ['ETH', 'WETH', 'STETH', 'WSTETH', 'RETH', 'CBETH'],
            'SOL': ['SOL', 'JUPSOL', 'JITOSOL'],
            'MATIC': ['MATIC', 'POL'],
            'ATOM': ['ATOM', 'ATOM2'],
            'DOT': ['DOT', 'DOT2']
        };

        function groupAssetsByAliases(items) {
            const groups = new Map();
            const ungrouped = [];

            items.forEach(item => {
                const symbol = (item.symbol || '').toUpperCase();
                let foundGroup = null;

                // Chercher dans quel groupe appartient ce symbol
                for (const [groupName, aliases] of Object.entries(ASSET_GROUPS)) {
                    if (aliases.includes(symbol)) {
                        foundGroup = groupName;
                        break;
                    }
                }

                if (foundGroup) {
                    if (!groups.has(foundGroup)) {
                        groups.set(foundGroup, {
                            label: foundGroup,
                            value: 0,
                            assets: []
                        });
                    }
                    const group = groups.get(foundGroup);
                    group.value += parseFloat(item.value_usd || 0);
                    group.assets.push(symbol);
                } else {
                    ungrouped.push({
                        label: symbol,
                        value: parseFloat(item.value_usd || 0)
                    });
                }
            });

            return [...Array.from(groups.values()), ...ungrouped];
        }

        // Cr√©er ou mettre √† jour le graphique portfolio
        function updatePortfolioChart(balancesData) {
            console.log('üîç DEBUG updatePortfolioChart - balancesData:', balancesData);

            if (!balancesData || !balancesData.items) {
                console.log('‚ùå No balances data or items');
                return;
            }

            const canvas = document.getElementById('portfolioChartCanvas');
            if (!canvas) {
                console.log('‚ùå Canvas element not found');
                return;
            }

            const ctx = canvas.getContext('2d');
            console.log('üîç DEBUG - Number of items:', balancesData.items.length);

            // Traiter les donn√©es pour le graphique avec regroupement par aliases
            const items = balancesData.items || [];
            const filteredItems = items.filter(item => parseFloat(item.value_usd || 0) > 0);

            // Regrouper par aliases
            const groupedData = groupAssetsByAliases(filteredItems);

            // Trier par valeur et prendre les top 8
            const sortedData = groupedData
                .sort((a, b) => b.value - a.value)
                .slice(0, 8);

            const labels = sortedData.map(item => item.label);
            const values = sortedData.map(item => item.value);
            const total = values.reduce((sum, val) => sum + val, 0);

            // D√©truire l'ancien graphique s'il existe
            if (portfolioChart) {
                portfolioChart.destroy();
            }

            // Obtenir les couleurs du th√®me actuel
            const isDark = document.documentElement.getAttribute('data-theme') === 'dark';
            const tooltipBg = isDark ? '#374151' : '#f9fafb';
            const tooltipText = isDark ? '#f9fafb' : '#1f2937';
            const tooltipBorder = isDark ? '#6b7280' : '#d1d5db';

            // Cr√©er le nouveau graphique
            portfolioChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: labels,
                    datasets: [{
                        data: values,
                        backgroundColor: PORTFOLIO_COLORS.slice(0, values.length),
                        borderColor: isDark ? '#374151' : '#ffffff',
                        borderWidth: 2,
                        hoverBorderWidth: 3
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            backgroundColor: tooltipBg,
                            titleColor: tooltipText,
                            bodyColor: tooltipText,
                            borderColor: tooltipBorder,
                            borderWidth: 1,
                            cornerRadius: 8,
                            padding: 12,
                            callbacks: {
                                label: function (context) {
                                    const value = context.parsed;
                                    const percentage = ((value / total) * 100).toFixed(1);
                                    const groupData = sortedData[context.dataIndex];
                                    let label = `${context.label}: ${formatUSD(value)} (${percentage}%)`;

                                    // Ajouter les assets du groupe si c'est un groupe
                                    if (groupData.assets && groupData.assets.length > 1) {
                                        label += `\nAssets: ${groupData.assets.join(', ')}`;
                                    }

                                    return label;
                                }
                            }
                        }
                    },
                    cutout: '60%',
                    animation: {
                        animateRotate: true,
                        duration: 1000
                    },
                    interaction: {
                        intersect: false,
                        mode: 'point'
                    }
                }
            });
        }

        // Forcer un refresh des donn√©es avec la source actuelle
        async function forceRefreshData() {
            console.log('üîÑ Force refresh demand√© par utilisateur');
            // Vider le cache si n√©cessaire
            await loadDashboardData();
        }
    </script>
</body>

</html>